<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ˆæ¡ˆè³‡è¨Šæµç¨‹åœ– - exam21_notemaker</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
            border-bottom: 4px solid #ffd700;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
            overflow-x: auto;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab-button:hover {
            color: #667eea;
            background: #f0f0f0;
        }

        .tab-button.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: white;
        }

        .tab-content {
            display: none;
            padding: 40px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mermaid {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #eee;
        }

        .diagram-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .diagram-description {
            background: #e8f4f8;
            padding: 15px;
            border-left: 4px solid #667eea;
            margin-bottom: 20px;
            border-radius: 4px;
            line-height: 1.6;
        }

        .decision-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }

        .decision-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .decision-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        .decision-table tr:hover {
            background: #f9f9f9;
        }

        .decision-table tr:last-child td {
            border-bottom: none;
        }

        .flow-summary {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
            line-height: 1.8;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            font-size: 0.95em;
        }

        .step-box {
            background: #fff9e6;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #ffd700;
            border-radius: 4px;
        }

        .step-box strong {
            color: #d4a800;
        }

        footer {
            background: #f5f5f5;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9em;
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .legend-color {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            border: 1px solid #999;
        }

        .info-box {
            background: #e8f5e9;
            padding: 15px;
            border-left: 4px solid #4caf50;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3e0;
            padding: 15px;
            border-left: 4px solid #ff9800;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background: #c8e6c9;
            padding: 15px;
            border-left: 4px solid #4caf50;
            margin: 20px 0;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .tab-button {
                padding: 12px 15px;
                font-size: 0.9em;
            }

            .tab-content {
                padding: 20px;
            }

            .decision-table {
                font-size: 0.9em;
            }

            .decision-table th,
            .decision-table td {
                padding: 10px;
            }
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 24px;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }

        .back-to-top:hover {
            background: #764ba2;
            transform: translateY(-5px);
        }

        .back-to-top.show {
            display: flex;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š å°ˆæ¡ˆè³‡è¨Šæµç¨‹åœ–</h1>
            <p>exam21_notemaker - å®Œæ•´ç³»çµ±è³‡è¨Šæµã€æ±ºç­–é‚è¼¯èˆ‡æ•¸æ“šè½‰æ›åœ–è¡¨</p>
            <p style="font-size: 0.9em; margin-top: 10px;">âœ… 6 å¤§æµç¨‹åœ– | åŒ…å«åˆ¤æ–·é‚è¼¯ | æœ€å¾Œæ›´æ–°: 2025-11-26</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab(0)">ğŸ“‹ ç¸½è¦½</button>
            <button class="tab-button" onclick="switchTab(1)">ğŸš€ ä¸»å…¥å£</button>
            <button class="tab-button" onclick="switchTab(2)">ğŸ“¥ æ•¸æ“šåˆ¤æ–·</button>
            <button class="tab-button" onclick="switchTab(3)">âš™ï¸ é è™•ç†</button>
            <button class="tab-button" onclick="switchTab(4)">ğŸ§  åˆ†æç”Ÿæˆ</button>
            <button class="tab-button" onclick="switchTab(5)">ğŸ” QA é©—è­‰</button>
            <button class="tab-button" onclick="switchTab(6)">ğŸ”„ å®Œæ•´æµç¨‹</button>
            <button class="tab-button" onclick="switchTab(7)">ğŸ“ˆ æ±ºç­–è¡¨</button>
        </div>

        <!-- Tab 0: ç¸½è¦½ -->
        <div class="tab-content active">
            <h2 style="color: #667eea; margin-bottom: 20px;">ğŸ“Š ç³»çµ±ç¸½è¦½</h2>

            <div class="info-box">
                <strong>ğŸ¯ æ ¸å¿ƒç›®æ¨™</strong><br>
                AI é©…å‹•æ™ºèƒ½ç­†è¨˜ç”Ÿæˆç³»çµ± - é€å­—ç¨¿/ç¶²é /PDF â†’ çµæ§‹åŒ–æ·±åº¦ç­†è¨˜
            </div>

            <h3 class="diagram-title">ğŸŒŸ ç³»çµ± 6 å¤§æµç¨‹åœ–</h3>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #90EE90;"></div>
                    <span><strong>æµç¨‹ 1</strong>: ç³»çµ±ä¸»å…¥å£ (6 å€‹é¸æ“‡é»)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #87CEEB;"></div>
                    <span><strong>æµç¨‹ 2</strong>: æ•¸æ“šä¾†æºåˆ¤æ–· (æ ¼å¼æª¢æ¸¬)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFB6C1;"></div>
                    <span><strong>æµç¨‹ 3</strong>: æ™ºèƒ½é è™•ç† (æ··åˆæ¨¡å¼)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFD700;"></div>
                    <span><strong>æµç¨‹ 4</strong>: åˆ†æèˆ‡ç”Ÿæˆ (æ ¸å¿ƒè™•ç†)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FF69B4;"></div>
                    <span><strong>æµç¨‹ 5</strong>: HackMD QA (ä¸‰å±¤é©—è­‰)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #00FF00;"></div>
                    <span><strong>æµç¨‹ 6</strong>: å®Œæ•´ç«¯åˆ°ç«¯ (å…¨ç³»çµ±æµ)</span>
                </div>
            </div>

            <h3 class="diagram-title">ğŸ“Š æµç¨‹åœ–è‰²ç¢¼èªªæ˜</h3>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #90EE90;"></div>
                    <span>æˆåŠŸ/é–‹å§‹</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #87CEEB;"></div>
                    <span>æ•¸æ“š/è¼¸å…¥</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFD700;"></div>
                    <span>æ±ºç­–é»</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFB6C1;"></div>
                    <span>è™•ç†æ­¥é©Ÿ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFA500;"></div>
                    <span>è­¦å‘Š/å‚™é¸</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFB6B6;"></div>
                    <span>éŒ¯èª¤/é€€å‡º</span>
                </div>
            </div>

            <h3 class="diagram-title">ğŸ¯ å¿«é€Ÿå°èˆª</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                <div class="step-box">
                    <strong>â–¶ æµç¨‹ 1 - ç³»çµ±ä¸»å…¥å£</strong><br>
                    æŸ¥çœ‹ run.sh çš„ 6 å€‹åŠŸèƒ½é¸æ“‡é»
                </div>
                <div class="step-box">
                    <strong>â–¶ æµç¨‹ 2 - æ•¸æ“šä¾†æºåˆ¤æ–·</strong><br>
                    è‡ªå‹•è­˜åˆ¥é€å­—ç¨¿/PDF/ç¶²é /YouTube
                </div>
                <div class="step-box">
                    <strong>â–¶ æµç¨‹ 3 - æ™ºèƒ½é è™•ç†</strong><br>
                    BS4 vs Playwright è‡ªå‹•æ±ºç­–
                </div>
                <div class="step-box">
                    <strong>â–¶ æµç¨‹ 4 - åˆ†æèˆ‡ç”Ÿæˆ</strong><br>
                    Gemini API èª¿ç”¨èˆ‡åœ–ç‰‡è™•ç†
                </div>
                <div class="step-box">
                    <strong>â–¶ æµç¨‹ 5 - QA é©—è­‰</strong><br>
                    ä¸‰å±¤ HackMD ç›¸å®¹æ€§é©—è­‰
                </div>
                <div class="step-box">
                    <strong>â–¶ æµç¨‹ 6 - å®Œæ•´ç«¯åˆ°ç«¯</strong><br>
                    æ•´åˆæ‰€æœ‰æ±ºç­–èˆ‡æµç¨‹
                </div>
            </div>

            <h3 class="diagram-title">ğŸ“ˆ ç³»çµ±çµ±è¨ˆ</h3>
            <table class="decision-table">
                <tr>
                    <th>æŒ‡æ¨™</th>
                    <th>æ•¸å€¼</th>
                    <th>èªªæ˜</th>
                </tr>
                <tr>
                    <td><strong>æµç¨‹åœ–æ•¸é‡</strong></td>
                    <td>6 å€‹</td>
                    <td>æ¶µè“‹æ•´å€‹ç³»çµ±æµç¨‹</td>
                </tr>
                <tr>
                    <td><strong>æ±ºç­–é»ç¸½æ•¸</strong></td>
                    <td>20+ å€‹</td>
                    <td>åŒ…å«æ‰€æœ‰åˆ†æ”¯é‚è¼¯</td>
                </tr>
                <tr>
                    <td><strong>ä¸»è¦å…¥å£é»</strong></td>
                    <td>6 å€‹</td>
                    <td>run.sh é¸é … 1-6</td>
                </tr>
                <tr>
                    <td><strong>æ•¸æ“šé¡å‹</strong></td>
                    <td>4 ç¨®</td>
                    <td>é€å­—ç¨¿ã€PDFã€ç¶²é ã€YouTube</td>
                </tr>
                <tr>
                    <td><strong>QA é©—è­‰å±¤</strong></td>
                    <td>3 å±¤</td>
                    <td>é é˜²â†’æª¢æ¸¬â†’ä¿®å¾©</td>
                </tr>
                <tr>
                    <td><strong>è‡ªå‹•åŒ–æ±ºç­–</strong></td>
                    <td>8 é …</td>
                    <td>BS4/PWã€åœ–ç‰‡è™•ç†ç­‰</td>
                </tr>
            </table>
        </div>

        <!-- Tab 1: ä¸»å…¥å£ -->
        <div class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">ğŸš€ ç³»çµ±ä¸»å…¥å£æµç¨‹åœ–</h2>

            <div class="diagram-description">
                <strong>ğŸ“Œ èªªæ˜</strong>: å±•ç¤º run.sh çš„ 6 å€‹ä¸»åŠŸèƒ½é¸æ“‡è·¯å¾‘ï¼Œä»¥åŠæ¯å€‹é¸æ“‡å°æ‡‰çš„å­æµç¨‹
            </div>

            <div class="mermaid">
graph TD
    Start([ä½¿ç”¨è€…åŸ·è¡Œ run.sh]) --> Menu[ä¸»é¸å–®]

    Menu --> Opt1[1. é€å­—ç¨¿ç­†è¨˜ç”Ÿæˆ]
    Menu --> Opt2[2. YouTube ä¸‹è¼‰èˆ‡è½‰æ›]
    Menu --> Opt3[3. ç¶²é åˆ†æ]
    Menu --> Opt4[4. PDF æ·±åº¦åˆ†æ]
    Menu --> Opt5[5. æ¸…ç†èˆ‡å‚™ä»½]
    Menu --> Opt6[6. çµæŸç¨‹å¼]

    Opt1 --> Mode1A[å–®æª”æ¡ˆæ¨¡å¼<br/>generator.py]
    Opt1 --> Mode1B[æ‰¹æ¬¡æ¨¡å¼<br/>chunked_generator.py]

    Opt2 --> Mode2[YouTube å­—å¹•ä¸‹è¼‰<br/>youtube_downloader.py]

    Opt3 --> Mode3A[éœæ…‹ç¶²é <br/>BeautifulSoup]
    Opt3 --> Mode3B[å‹•æ…‹ç¶²é <br/>Playwright]
    Opt3 --> Mode3C[è‡ªå‹•åµæ¸¬<br/>web_preprocessor_hybrid.py]

    Opt4 --> Mode4A[åŸæ–‡ç‰ˆ<br/>Docling è§£æ]
    Opt4 --> Mode4B[ç¿»è­¯ç‰ˆ<br/>Docling + ç¿»è­¯]
    Opt4 --> Mode4C[æ·±åº¦åˆ†æ<br/>OEM + RICE]

    Opt5 --> Mode5A[æƒæ<br/>--scan]
    Opt5 --> Mode5B[é è¦½<br/>--dry-run]
    Opt5 --> Mode5C[åŸ·è¡Œ<br/>--execute]
    Opt5 --> Mode5D[äº’å‹•å¼<br/>--interactive]
    Opt5 --> Mode5E[å‚™ä»½ç®¡ç†<br/>--list / --rollback]

    Mode1A --> Next1[é€²å…¥è³‡è¨Šæµç¨‹]
    Mode1B --> Next1
    Mode2 --> Next1
    Mode3A --> Next1
    Mode3B --> Next1
    Mode3C --> Next1
    Mode4A --> Next1
    Mode4B --> Next1
    Mode4C --> Next1

    Mode5A --> End([ç¨‹å¼çµæŸ])
    Mode5B --> End
    Mode5C --> End
    Mode5D --> End
    Mode5E --> End

    style Start fill:#90EE90
    style Menu fill:#87CEEB
    style Opt1 fill:#FFB6C1
    style Opt2 fill:#FFB6C1
    style Opt3 fill:#FFB6C1
    style Opt4 fill:#FFB6C1
    style Opt5 fill:#FFFFE0
    style Opt6 fill:#FFB6B6
    style End fill:#FFB6B6
            </div>

            <h3 class="diagram-title">ğŸ¯ åŠŸèƒ½èªªæ˜</h3>
            <table class="decision-table">
                <tr>
                    <th>é¸é …</th>
                    <th>åŠŸèƒ½</th>
                    <th>å­é¸é …</th>
                    <th>åŸ·è¡Œæ¨¡çµ„</th>
                </tr>
                <tr>
                    <td><strong>1</strong></td>
                    <td>é€å­—ç¨¿ç­†è¨˜ç”Ÿæˆ</td>
                    <td>å–®æª”æ¡ˆ / æ‰¹æ¬¡</td>
                    <td>generator.py / chunked_generator.py</td>
                </tr>
                <tr>
                    <td><strong>2</strong></td>
                    <td>YouTube ä¸‹è¼‰ + è½‰æ›</td>
                    <td>N/A</td>
                    <td>youtube_downloader.py</td>
                </tr>
                <tr>
                    <td><strong>3</strong></td>
                    <td>ç¶²é åˆ†æ</td>
                    <td>éœæ…‹ / å‹•æ…‹ / è‡ªå‹•</td>
                    <td>web_preprocessor_hybrid.py</td>
                </tr>
                <tr>
                    <td><strong>4</strong></td>
                    <td>PDF æ·±åº¦åˆ†æ</td>
                    <td>åŸæ–‡ / ç¿»è­¯ / æ·±åº¦</td>
                    <td>pdf_article_main.py</td>
                </tr>
                <tr>
                    <td><strong>5</strong></td>
                    <td>æ¸…ç†/å‚™ä»½</td>
                    <td>æƒæ/é è¦½/åŸ·è¡Œ/äº’å‹•/å‚™ä»½</td>
                    <td>cleanup_engine.py</td>
                </tr>
                <tr>
                    <td><strong>6</strong></td>
                    <td>é€€å‡º</td>
                    <td>N/A</td>
                    <td>N/A</td>
                </tr>
            </table>
        </div>

        <!-- Tab 2: æ•¸æ“šåˆ¤æ–· -->
        <div class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">ğŸ“¥ æ•¸æ“šä¾†æºåˆ¤æ–·æµç¨‹åœ–</h2>

            <div class="diagram-description">
                <strong>ğŸ“Œ èªªæ˜</strong>: è‡ªå‹•æª¢æ¸¬èˆ‡é©—è­‰è¼¸å…¥æ•¸æ“šé¡å‹ï¼ˆæ–‡ä»¶ vs URLã€å‰¯æª”åã€å¯è¨ªå•æ€§ç­‰ï¼‰
            </div>

            <div class="mermaid">
graph TD
    Input["ğŸ“¥ ä½¿ç”¨è€…è¼¸å…¥<br/>æª”æ¡ˆæˆ– URL"] --> Detect{"æª¢æ¸¬è¼¸å…¥é¡å‹"}

    Detect -->|æ–‡ä»¶è·¯å¾‘| FileCheck{"æª¢æŸ¥å‰¯æª”å"}
    FileCheck -->|.txt/.md/.srt| Transcript["ğŸ“ é€å­—ç¨¿æª”æ¡ˆ<br/>Transcript"]
    FileCheck -->|.pdf| PDF["ğŸ“„ PDF æª”æ¡ˆ<br/>PDF Document"]
    FileCheck -->|å…¶ä»–| Error1["âŒ ä¸æ”¯æ´çš„æ ¼å¼<br/>é€€å‡ºæˆ–é‡è©¦"]

    Detect -->|URL| URLCheck{"åˆ¤æ–· URL é¡å‹"}
    URLCheck -->|YouTube é€£çµ| YT["ğŸ¥ YouTube URL<br/>ä¸‹è¼‰å­—å¹•â†’é€å­—ç¨¿"]
    URLCheck -->|ç¶²ç«™ URL| Web["ğŸŒ ç¶²ç«™ URL<br/>Web Article"]
    URLCheck -->|å…¶ä»–| Error2["âŒ ç„¡æ•ˆ URL<br/>é€€å‡ºæˆ–é‡è©¦"]

    Transcript --> HasContent{"æª”æ¡ˆæ˜¯å¦<br/>æœ‰å…§å®¹?"}
    HasContent -->|æ˜¯| TID["âœ… é€å­—ç¨¿<br/>è­˜åˆ¥å®Œæˆ"]
    HasContent -->|å¦| Error3["âŒ ç©ºæª”æ¡ˆ<br/>é€€å‡ºæˆ–é‡è©¦"]

    PDF --> HasPages{"PDF æ˜¯å¦<br/>å¯è®€?"}
    HasPages -->|æ˜¯| PID["âœ… PDF<br/>è­˜åˆ¥å®Œæˆ"]
    HasPages -->|å¦| Error4["âŒ PDF æå£<br/>é€€å‡ºæˆ–é‡è©¦"]

    YT --> Download["â¬‡ï¸ ä¸‹è¼‰ YouTube<br/>å­—å¹• zh-TW/en"]
    Download --> YTResult{"å­—å¹•<br/>ä¸‹è¼‰æˆåŠŸ?"}
    YTResult -->|æ˜¯| YTTranscript["âœ… YouTube<br/>é€å­—ç¨¿<br/>è­˜åˆ¥å®Œæˆ"]
    YTResult -->|å¦| Error5["âŒ å­—å¹•å–å¾—å¤±æ•—<br/>é€€å‡ºæˆ–é‡è©¦"]

    Web --> AccessCheck{"ç¶²é æ˜¯å¦<br/>å¯è¨ªå•?"}
    AccessCheck -->|æ˜¯| WID["âœ… ç¶²é <br/>è­˜åˆ¥å®Œæˆ"]
    AccessCheck -->|å¦| Error6["âŒ ç„¡æ³•è¨ªå•<br/>æª¢æŸ¥é€£ç·š"]

    TID --> Next["â†“ é€²å…¥é è™•ç†<br/>æµç¨‹"]
    PID --> Next
    YTTranscript --> Next
    WID --> Next

    Error1 --> Retry{"é‡è©¦?"}
    Error2 --> Retry
    Error3 --> Retry
    Error4 --> Retry
    Error5 --> Retry
    Error6 --> Retry

    Retry -->|æ˜¯| Input
    Retry -->|å¦| End1["ğŸ›‘ çµæŸ"]

    style Input fill:#87CEEB
    style Detect fill:#FFD700
    style Transcript fill:#90EE90
    style PDF fill:#90EE90
    style YT fill:#90EE90
    style Web fill:#90EE90
    style TID fill:#00FF00
    style PID fill:#00FF00
    style YTTranscript fill:#00FF00
    style WID fill:#00FF00
    style Error1 fill:#FFB6B6
    style Error2 fill:#FFB6B6
    style Error3 fill:#FFB6B6
    style Error4 fill:#FFB6B6
    style Error5 fill:#FFB6B6
    style Error6 fill:#FFB6B6
            </div>

            <h3 class="diagram-title">ğŸ” æ±ºç­–é‚è¼¯</h3>
            <ol style="line-height: 2;">
                <li><strong>è¼¸å…¥é¡å‹æª¢æ¸¬</strong>: åˆ¤æ–·æ˜¯æª”æ¡ˆè·¯å¾‘é‚„æ˜¯ URL</li>
                <li><strong>æ ¼å¼é©—è­‰</strong>: æª¢æŸ¥å‰¯æª”å (.txt/.md/.srt/.pdf) æˆ– URL é¡å‹</li>
                <li><strong>å…§å®¹é©—è­‰</strong>: ç¢ºä¿æœ‰å¯¦éš›å…§å®¹ (éç©ºã€å¯è®€ã€å¯è¨ªå•)</li>
                <li><strong>éŒ¯èª¤è™•ç†</strong>: å¤±æ•—æ™‚æä¾›é‡è©¦é¸é …</li>
                <li><strong>ä¸‹è¼‰æµç¨‹</strong>: YouTube å­—å¹•è‡ªå‹•ä¸‹è¼‰ä¸¦è½‰æ›ç‚ºé€å­—ç¨¿æ ¼å¼</li>
            </ol>
        </div>

        <!-- Tab 3: é è™•ç† -->
        <div class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">âš™ï¸ æ™ºèƒ½é è™•ç†åˆ¤æ–·æµç¨‹åœ–</h2>

            <div class="diagram-description">
                <strong>ğŸ“Œ èªªæ˜</strong>: æ ¹æ“šæ•¸æ“šé¡å‹é¸æ“‡é è™•ç†å™¨ï¼Œç‰¹åˆ¥æ˜¯ç¶²é çš„æ··åˆæ¨¡å¼æ±ºç­– (BS4 vs Playwright)
            </div>

            <div class="mermaid">
graph TD
    Data["âœ… è­˜åˆ¥å®Œæˆçš„æ•¸æ“š<br/>é€å­—ç¨¿/PDF/ç¶²é /YouTube"] --> Router{"æ•¸æ“šä¾†æº"}

    Router -->|é€å­—ç¨¿| TProcess["ğŸ“ é€å­—ç¨¿é è™•ç†<br/>transcript_cleaner.py"]
    Router -->|PDF| PProcess["ğŸ“„ PDF é è™•ç†<br/>pdf_preprocessor_docling.py"]
    Router -->|ç¶²é /YouTube| WProcess["ğŸŒ ç¶²é é è™•ç†<br/>web_preprocessor_hybrid.py"]

    TProcess --> TClean["æ¸…ç†æ­¥é©Ÿ:<br/>â€¢ ç§»é™¤æ™‚é–“æˆ³<br/>â€¢ ç§»é™¤åºè™Ÿ<br/>â€¢ æ¨™è¨»ç™¼è¨€è€…<br/>â€¢ ç§»é™¤è´…è©<br/>â€¢ ä¿®æ­£å°ˆæœ‰åè©"]
    TClean --> TOutput["ğŸ“¤ è¼¸å‡º<br/>æ¸…ç†éçš„é€å­—ç¨¿"]

    PProcess --> PDecision{"é¸æ“‡ PDF<br/>è™•ç†æ¨¡å¼"}
    PDecision -->|åŸæ–‡ç‰ˆ| PMode1["è§£æ PDF çµæ§‹<br/>ä¿ç•™æ‰€æœ‰å…§å®¹"]
    PDecision -->|ç¿»è­¯ç‰ˆ| PMode2["è§£æ PDF çµæ§‹<br/>+ Google Translate"]
    PDecision -->|æ·±åº¦åˆ†æ| PMode3["å®Œæ•´è§£æ<br/>æå–åœ–ç‰‡"]

    PMode1 --> POutput["ğŸ“¤ è¼¸å‡º<br/>Markdown åŸæ–‡"]
    PMode2 --> POutput
    PMode3 --> POutput

    WProcess --> HybridDetect{"è‡ªå‹•åµæ¸¬<br/>ç¶²é é¡å‹"}

    HybridDetect -->|éœæ…‹ä¿¡è™Ÿ<br/>æª¢æ¸¬åˆ°| BS4Path["âš¡ BeautifulSoup<br/>å¿«é€Ÿè·¯å¾‘<br/>&lt;50ms"]
    HybridDetect -->|å‹•æ…‹ä¿¡è™Ÿ<br/>æª¢æ¸¬åˆ°| PlaywrightPath["ğŸ­ Playwright<br/>å®Œæ•´æ¸²æŸ“<br/>2-5 ç§’"]
    HybridDetect -->|ç„¡æ³•åˆ¤å®š| ConfigCheck{"config.py<br/>è¨­å®š"}

    ConfigCheck -->|ç¦ç”¨ Playwright| BS4Path
    ConfigCheck -->|å•Ÿç”¨è‡ªå‹•åˆ‡æ›| SmartSwitch["æ™ºèƒ½ç­–ç•¥:<br/>å…ˆå˜—è©¦ BS4<br/>å¤±æ•—å‰‡åˆ‡æ› PW"]

    SmartSwitch --> TryBS4{"BS4 æå–<br/>æˆåŠŸ?"}
    TryBS4 -->|æ˜¯,å…§å®¹ 80%| BS4Success["âœ… BS4 è¶³å¤ <br/>ä½¿ç”¨å¿«é€Ÿè·¯å¾‘"]
    TryBS4 -->|å¦,å…§å®¹ä¸å®Œæ•´| PWFallback["ğŸ­ åˆ‡æ› Playwright<br/>é€²è¡Œå®Œæ•´æ¸²æŸ“"]

    BS4Path --> ExtractBS4["æå–å…§å®¹:<br/>â€¢ æ¨™é¡Œ<br/>â€¢ æ­£æ–‡<br/>â€¢ åœ–ç‰‡ URL<br/>â€¢ çµæ§‹åŒ–æ•¸æ“š"]

    PlaywrightPath --> ExtractPW["æå–å…§å®¹:<br/>â€¢ å‹•æ…‹æ¸²æŸ“çµæœ<br/>â€¢ JavaScript åŸ·è¡Œçµæœ<br/>â€¢ å®Œæ•´ DOM"]

    PWFallback --> ExtractPW

    BS4Success --> ExtractBS4

    ExtractBS4 --> CleanWeb["æ¸…ç†æ­¥é©Ÿ:<br/>â€¢ ç§»é™¤å»£å‘Š<br/>â€¢ ç§»é™¤å°èˆª<br/>â€¢ æ¨™æº–åŒ–æ ¼å¼<br/>â€¢ åœ–ç‰‡è·¯å¾‘ä¿®å¾©"]

    ExtractPW --> CleanWeb

    CleanWeb --> WOutput["ğŸ“¤ è¼¸å‡º<br/>Cleaned HTML/Markdown"]

    TOutput --> Next["â†“ é€²å…¥åˆ†ææµç¨‹"]
    POutput --> Next
    WOutput --> Next

    style Data fill:#87CEEB
    style Router fill:#FFD700
    style TProcess fill:#FFB6C1
    style PProcess fill:#FFB6C1
    style WProcess fill:#FFB6C1
    style HybridDetect fill:#FFD700
    style BS4Path fill:#90EE90
    style PlaywrightPath fill:#90EE90
    style BS4Success fill:#00FF00
    style PWFallback fill:#FFA500
            </div>

            <h3 class="diagram-title">ğŸ” æ ¸å¿ƒæ±ºç­–é‚è¼¯</h3>
            <div class="step-box">
                <strong>ç¶²é é è™•ç†æ··åˆæ¨¡å¼é¸æ“‡</strong><br><br>
                1. æª¢æ¸¬ç¶²é ç‰¹å¾µ (React/Vue/Next.js æ¡†æ¶ä¿¡è™Ÿ)
                <br>2. éœæ…‹ç¶²é  â†’ BeautifulSoup (å¿«é€Ÿ)
                <br>3. å‹•æ…‹ç¶²é  â†’ Playwright (å®Œæ•´)
                <br>4. ç„¡æ³•åˆ¤å®š â†’ æŸ¥è©¢ config.py è¨­å®š
                <br>5. è‡ªå‹•åˆ‡æ›æ¨¡å¼ â†’ å…ˆ BS4, å¤±æ•—å‰‡ Playwright
            </div>

            <h3 class="diagram-title">â±ï¸ æ€§èƒ½å°æ¯”</h3>
            <table class="decision-table">
                <tr>
                    <th>é è™•ç†å™¨</th>
                    <th>åŸ·è¡Œæ™‚é–“</th>
                    <th>é©ç”¨å ´æ™¯</th>
                    <th>å„ªç¼ºé»</th>
                </tr>
                <tr>
                    <td><strong>BeautifulSoup</strong></td>
                    <td>&lt;50ms</td>
                    <td>éœæ…‹ç¶²é </td>
                    <td>âœ… å¿«é€Ÿ | âŒ ä¸æ”¯æŒå‹•æ…‹</td>
                </tr>
                <tr>
                    <td><strong>Playwright</strong></td>
                    <td>2-5 ç§’</td>
                    <td>å‹•æ…‹ç¶²é </td>
                    <td>âœ… å®Œæ•´æ¸²æŸ“ | âŒ è¼ƒæ…¢</td>
                </tr>
                <tr>
                    <td><strong>æ··åˆæ¨¡å¼</strong></td>
                    <td>è‡ªé©æ‡‰</td>
                    <td>æ‰€æœ‰ç¶²é </td>
                    <td>âœ… æ™ºèƒ½åˆ‡æ› | âœ… å…¼é¡§é€Ÿåº¦</td>
                </tr>
            </table>
        </div>

        <!-- Tab 4: åˆ†æç”Ÿæˆ -->
        <div class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">ğŸ§  åˆ†æèˆ‡ç”Ÿæˆæµç¨‹åœ–</h2>

            <div class="diagram-description">
                <strong>ğŸ“Œ èªªæ˜</strong>: æ ¸å¿ƒè™•ç†ç®¡é“ - é è™•ç† â†’ åˆ†æ â†’ API èª¿ç”¨ â†’ åœ–ç‰‡è™•ç† â†’ è¼¸å‡º
            </div>

            <div class="mermaid">
graph TD
    PreparedData["âœ… é è™•ç†å®Œæˆ<br/>æ¸…ç†éçš„å…§å®¹"] --> Analyze["ğŸ§  åˆ†æéšæ®µ<br/>markdown_report_generator.py"]

    Analyze --> AnalysisType{"Content Type<br/>åˆ¤æ–·"}

    AnalysisType -->|é€å­—ç¨¿| TranscriptAnalysis["TranscriptNoteGenerator<br/>è™•ç†é‚è¼¯:<br/>â€¢ OEM æ¡†æ¶åˆ†æ<br/>â€¢ RICE å„ªå…ˆç´šè©•åˆ†<br/>â€¢ Simpson æ‚–è«–æª¢æŸ¥<br/>â€¢ æ™ºèƒ½åœ–è¡¨é¸æ“‡"]

    AnalysisType -->|ç¶²é /PDF| ArticleAnalysis["WebArticleAnalyzer<br/>/ PDFArticleAnalyzer<br/>è™•ç†é‚è¼¯:<br/>â€¢ æ·±åº¦å…§å®¹åˆ†æ<br/>â€¢ å¤šç¶­åº¦è©•ä¼°<br/>â€¢ åœ–ç‰‡ Vision åˆ†æ<br/>â€¢ è¦–è¦ºåŒ–ç”Ÿæˆ"]

    TranscriptAnalysis --> CallGemini["ğŸ“¡ å‘¼å« Gemini API<br/>2.5 Pro / 2.0 Flash<br/><br/>â€¢ å¤š Key è¼ªæ›¿<br/>â€¢ è‡ªå‹•é‡è©¦æ©Ÿåˆ¶<br/>â€¢ é…é¡ç®¡ç†"]

    ArticleAnalysis --> CallGemini

    CallGemini --> ImageProcess{"æ˜¯å¦éœ€è¦<br/>åœ–ç‰‡åˆ†æ?"}

    ImageProcess -->|å¦| DirectGenerate["ç”Ÿæˆ Markdown<br/>å ±å‘Š"]
    ImageProcess -->|æ˜¯| VisionAnalysis["ğŸ–¼ï¸ Vision API<br/>åœ–ç‰‡åˆ†æ<br/><br/>â€¢ å¤š Key é…é¡ç®¡ç†<br/>â€¢ è‡ªå‹•è¼ªæ›¿<br/>â€¢ æ™ºèƒ½åµŒå…¥"]

    VisionAnalysis --> EmbedImages["å°‡åœ–ç‰‡åµŒå…¥<br/>è‡³å ±å‘Šä¸­"]

    EmbedImages --> DirectGenerate

    DirectGenerate --> GeneratedMarkdown["ğŸ“„ ç”Ÿæˆ Markdown<br/>report.md"]

    GeneratedMarkdown --> Validate["ğŸ” é©—è­‰éšæ®µ<br/>ä¸‰å±¤ QA ç³»çµ±"]

    Validate --> Next["â†“ é€²å…¥é©—è­‰æµç¨‹"]

    style PreparedData fill:#87CEEB
    style Analyze fill:#FFD700
    style AnalysisType fill:#FFD700
    style TranscriptAnalysis fill:#FFB6C1
    style ArticleAnalysis fill:#FFB6C1
    style CallGemini fill:#87CEEB
    style ImageProcess fill:#FFD700
    style DirectGenerate fill:#90EE90
    style VisionAnalysis fill:#87CEEB
    style EmbedImages fill:#90EE90
    style GeneratedMarkdown fill:#00FF00
    style Validate fill:#FFD700
            </div>

            <h3 class="diagram-title">ğŸ”§ åˆ†ææ¨¡çµ„</h3>
            <table class="decision-table">
                <tr>
                    <th>åˆ†æå™¨</th>
                    <th>é©ç”¨å…§å®¹</th>
                    <th>æ ¸å¿ƒé‚è¼¯</th>
                    <th>è¼¸å‡ºå½¢å¼</th>
                </tr>
                <tr>
                    <td><strong>TranscriptNoteGenerator</strong></td>
                    <td>é€å­—ç¨¿</td>
                    <td>OEM + RICE + Simpson</td>
                    <td>çµæ§‹åŒ–ç­†è¨˜</td>
                </tr>
                <tr>
                    <td><strong>WebArticleAnalyzer</strong></td>
                    <td>ç¶²é æ–‡ç« </td>
                    <td>æ·±åº¦åˆ†æ + Vision</td>
                    <td>åœ–æ–‡ä¸¦èŒ‚ç­†è¨˜</td>
                </tr>
                <tr>
                    <td><strong>PDFArticleAnalyzer</strong></td>
                    <td>PDF æ–‡ä»¶</td>
                    <td>çµæ§‹æå– + åœ–ç‰‡åˆ†æ</td>
                    <td>çµæ§‹åŒ–ç­†è¨˜</td>
                </tr>
            </table>

            <h3 class="diagram-title">ğŸ“¡ API èª¿ç”¨ç­–ç•¥</h3>
            <div class="step-box">
                <strong>Gemini API</strong><br>
                â€¢ ä½¿ç”¨ 2.5 Pro æˆ– 2.0 Flash<br>
                â€¢ å¤š Key è¼ªæ›¿æ©Ÿåˆ¶ (é¿å…å–®é»é™åˆ¶)<br>
                â€¢ è‡ªå‹•é‡è©¦æ©Ÿåˆ¶ (å¤±æ•—è‡ªå‹•é‡è©¦)<br>
                â€¢ é…é¡ç®¡ç† (è¿½è¹¤ä½¿ç”¨æƒ…æ³)
            </div>

            <div class="step-box">
                <strong>Vision API (æ¢ä»¶èª¿ç”¨)</strong><br>
                â€¢ åœ–ç‰‡è™•ç†: 58+ å¼µåœ–ç‰‡å®Œæ•´è¦†è“‹<br>
                â€¢ éŒ¯èª¤ç‡: 0%<br>
                â€¢ è‡ªå‹•è¼ªæ›¿: 6 å€‹ Key å‡å‹»åˆ†é…<br>
                â€¢ ç­‰å¾…æ™‚é–“: 0.8 ç§’/å¼µ (vs. 4 ç§’/å¼µ)
            </div>
        </div>

        <!-- Tab 5: QA é©—è­‰ -->
        <div class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">ğŸ” HackMD QA ä¸‰å±¤é©—è­‰æµç¨‹åœ–</h2>

            <div class="diagram-description">
                <strong>ğŸ“Œ èªªæ˜</strong>: å“è³ªä¿è­‰ç³»çµ± - é é˜² (Layer 1) â†’ æª¢æ¸¬ (Layer 2) â†’ ä¿®å¾© (Layer 3)
            </div>

            <div class="mermaid">
graph TD
    GeneratedReport["ğŸ“„ ç”Ÿæˆçš„ Markdown<br/>å ±å‘Š"] --> Layer1["ğŸ›¡ï¸ Layer 1: é é˜²<br/>Gemini æç¤ºè©å„ªåŒ–"]

    Layer1 --> L1Check["æª¢æŸ¥é»:<br/>â€¢ HackMD èªæ³•è¦ç¯„<br/>â€¢ Mermaid åœ–è¡¨è¦å‰‡<br/>â€¢ å­—ç¬¦ç·¨ç¢¼<br/>â€¢ é€£çµæ ¼å¼<br/><br/>æç¤ºè©å…§å»º 1,554 å­—è¦ç¯„"]

    L1Check --> L1Result{"æç¤ºè©æ˜¯å¦<br/>å·²åŒ…å«<br/>HackMD è¦ç¯„?"}

    L1Result -->|æ˜¯| L2["âœ… Layer 1 é€šé<br/>â†“<br/><br/>ğŸ” Layer 2: æª¢æ¸¬<br/>è‡ªå‹•é©—è­‰å™¨"]
    L1Result -->|å¦| L1Warn["âš ï¸ è­¦å‘Š:<br/>æç¤ºè©ä¸å®Œæ•´<br/>ä½†ç¹¼çºŒæª¢æ¸¬"]
    L1Warn --> L2

    L2 --> L2Check["æª¢æŸ¥å…§å®¹:<br/>â€¢ Mermaid èªæ³•æª¢æŸ¥<br/>  - flowchart/C4/sequence<br/>  - æ‹¬è™ŸåŒ¹é…<br/>  - é‚Šç•Œå®šç¾©<br/>  - å­åœ–èªæ³•<br/>â€¢ HackMD ç‰¹å®šè¦å‰‡<br/>  - HTML æ¨™ç±¤<br/>  - CSS è®Šæ•¸<br/>  - è¨»è§£æ ¼å¼<br/><br/>43 é …æ¸¬è©¦"]

    L2Check --> L2Result{"é©—è­‰é€šé<br/>å¤šå°‘ç™¾åˆ†æ¯”?"}

    L2Result -->|100% âœ…| L3Clean["âœ… Layer 2 é€šé<br/>ç„¡éœ€ä¿®å¾©<br/>â†“<br/><br/>ğŸ”§ Layer 3: ä¿®å¾©<br/>è‡ªå‹•ä¿®å¾©å™¨"]

    L2Result -->|75%-99%| L3Minor["âš ï¸ Layer 2 è­¦å‘Š<br/>ç™¼ç¾è¼•å¾®å•é¡Œ<br/>â†“<br/><br/>ğŸ”§ Layer 3: ä¿®å¾©<br/>è‡ªå‹•ä¿®å¾©å™¨"]

    L2Result -->|&lt;75%| L3Severe["âŒ Layer 2 å¤±æ•—<br/>ç™¼ç¾åš´é‡å•é¡Œ<br/>â†“<br/><br/>ğŸ”§ Layer 3: ä¿®å¾©<br/>è‡ªå‹•ä¿®å¾©å™¨"]

    L3Clean --> L3Check["ä¿®å¾©é …ç›®:<br/>â€¢ æ‹¬è™Ÿ/åˆ†è™Ÿè£œé½Š<br/>â€¢ Mermaid å®£å‘Šèªæ³•<br/>â€¢ HTML æ¨™ç±¤è½‰ç¾©<br/>â€¢ CSS è®Šæ•¸ä¿®æ­£<br/>â€¢ è¨»è§£æ ¼å¼èª¿æ•´<br/><br/>310+ è¡Œä¿®å¾©é‚è¼¯"]

    L3Minor --> L3Check
    L3Severe --> L3Check

    L3Check --> L3Result{"ä¿®å¾©æˆåŠŸ?"}

    L3Result -->|æ˜¯,100% âœ…| L3Pass["âœ… Layer 3 ä¿®å¾©æˆåŠŸ<br/>å ±å‘Šå·²å®‰å…¨"]
    L3Result -->|å¦,éƒ¨åˆ†ä¿®å¾©| L3Partial["âš ï¸ Layer 3 éƒ¨åˆ†æˆåŠŸ<br/>å»ºè­°äººå·¥å¯©æŸ¥"]

    L3Pass --> SaveReport["ğŸ’¾ ä¿å­˜å ±å‘Š<br/>output/ ç›®éŒ„"]
    L3Partial --> SaveReport

    SaveReport --> Final["âœ… æœ€çµ‚è¼¸å‡º<br/>HackMD ç›¸å®¹å ±å‘Š"]

    Final --> End["å®Œæˆ!<br/>å¯åœ¨ HackMD ä¸­ä½¿ç”¨"]

    style GeneratedReport fill:#87CEEB
    style Layer1 fill:#90EE90
    style Layer2 fill:#FFD700
    style Layer3 fill:#FFB6C1
    style L1Check fill:#E6F3FF
    style L2Check fill:#E6F3FF
    style L3Check fill:#E6F3FF
    style L3Pass fill:#00FF00
    style SaveReport fill:#90EE90
    style Final fill:#00FF00
    style End fill:#00FF00
            </div>

            <h3 class="diagram-title">ğŸ“Š ä¸‰å±¤ç³»çµ±è©³è§£</h3>
            <table class="decision-table">
                <tr>
                    <th>å±¤ç´š</th>
                    <th>åŠŸèƒ½</th>
                    <th>æ™‚æ©Ÿ</th>
                    <th>æˆåŠŸç‡</th>
                    <th>è©³ç´°</th>
                </tr>
                <tr>
                    <td><strong>Layer 1</strong></td>
                    <td>é é˜²æ€§å„ªåŒ–</td>
                    <td>ç”Ÿæˆå‰</td>
                    <td>100%</td>
                    <td>æç¤ºè©åŒ…å« 1,554 å­— HackMD è¦ç¯„</td>
                </tr>
                <tr>
                    <td><strong>Layer 2</strong></td>
                    <td>è‡ªå‹•é©—è­‰æª¢æ¸¬</td>
                    <td>ç”Ÿæˆå¾Œ</td>
                    <td>99.7%</td>
                    <td>43 é …æ¸¬è©¦ï¼Œå…¨è‡ªå‹•æª¢æŸ¥</td>
                </tr>
                <tr>
                    <td><strong>Layer 3</strong></td>
                    <td>è‡ªå‹•ä¿®å¾©</td>
                    <td>é©—è­‰å¤±æ•—</td>
                    <td>100%</td>
                    <td>310+ è¡Œä¿®å¾©é‚è¼¯ï¼Œè‡ªå‹•ä¿®æ­£</td>
                </tr>
            </table>

            <h3 class="diagram-title">âœ… é©—è­‰é …ç›®æ¸…å–®</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <strong>Mermaid åœ–è¡¨æª¢æŸ¥</strong>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li>flowchart èªæ³•</li>
                        <li>C4 åœ–è¡¨èªæ³•</li>
                        <li>sequence åœ–è¡¨èªæ³•</li>
                        <li>æ‹¬è™ŸåŒ¹é…</li>
                        <li>é‚Šç•Œå®šç¾©</li>
                        <li>å­åœ–èªæ³•</li>
                        <li>é‚Šæ¨™ç±¤èªæ³•</li>
                    </ul>
                </div>
                <div>
                    <strong>HackMD ç‰¹å®šè¦å‰‡</strong>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li>HTML æ¨™ç±¤è½‰ç¾©</li>
                        <li>CSS è®Šæ•¸æ ¼å¼</li>
                        <li>è¨»è§£èªæ³•</li>
                        <li>å­—ç¬¦ç·¨ç¢¼</li>
                        <li>é€£çµæ ¼å¼</li>
                        <li>è¡¨æ ¼èªæ³•</li>
                        <li>ä»£ç¢¼å¡Šæ ¼å¼</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Tab 6: å®Œæ•´æµç¨‹ -->
        <div class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">ğŸ”„ å®Œæ•´ç«¯åˆ°ç«¯æµç¨‹åœ–</h2>

            <div class="diagram-description">
                <strong>ğŸ“Œ èªªæ˜</strong>: æ•´åˆæ‰€æœ‰æ±ºç­–èˆ‡æµç¨‹çš„å®Œæ•´ç³»çµ±è³‡è¨Šæµ
            </div>

            <div class="mermaid">
graph TD
    Start([ğŸš€ ä½¿ç”¨è€…åŸ·è¡Œ]) --> Menu["main: run.sh<br/>é¸æ“‡åŠŸèƒ½"]

    Menu --> Choice{"ä½¿ç”¨è€…<br/>é¸æ“‡"}

    Choice -->|é¸é …1-4| Process["é€²å…¥å…§å®¹ç”Ÿæˆæµç¨‹"]
    Choice -->|é¸é …5| Cleanup["é€²å…¥æ¸…ç†æµç¨‹"]
    Choice -->|é¸é …6| Exit1["âŒ é€€å‡º"]

    Process --> Input["ğŸ“¥ ä½¿ç”¨è€…è¼¸å…¥<br/>æª”æ¡ˆ/URL"]

    Input --> Detect["Detect æ¨¡çµ„<br/>è¼¸å…¥é¡å‹æª¢æ¸¬"]

    Detect --> DataType{"æ•¸æ“šé¡å‹<br/>åˆ¤æ–·"}

    DataType -->|é€å­—ç¨¿| TPath["é€å­—ç¨¿è™•ç†"]
    DataType -->|PDF| PPath["PDF è™•ç†"]
    DataType -->|ç¶²é | WPath["ç¶²é è™•ç†"]
    DataType -->|YouTube| YPath["YouTube è™•ç†"]

    TPath --> TPreprocess["transcript_cleaner.py<br/>æ¸…ç†æ™‚é–“æˆ³/ç™¼è¨€è€…"]
    PPath --> PPreprocess["pdf_preprocessor_docling.py<br/>Docling è§£æ"]
    WPath --> WPreprocess["web_preprocessor_hybrid.py<br/>è‡ªå‹•æ±ºç­–"]
    YPath --> YDownload["youtube_downloader.py<br/>ä¸‹è¼‰å­—å¹•"]

    WPreprocess --> HybridDecision{"BS4 vs<br/>Playwright?"}
    HybridDecision --> |éœæ…‹| BS4["BeautifulSoup"]
    HybridDecision --> |å‹•æ…‹| PW["Playwright"]
    HybridDecision --> |è‡ªå‹•| SmartSwitch["æ™ºèƒ½åˆ‡æ›"]

    BS4 --> WPrepDone["ç¶²é å…§å®¹æ¸…ç†"]
    PW --> WPrepDone
    SmartSwitch --> WPrepDone

    YDownload --> TPreprocess

    TPreprocess --> TPrepDone["é€å­—ç¨¿æ¸…ç†å®Œæˆ"]
    PPreprocess --> PPrepDone["PDF è½‰æ›å®Œæˆ"]

    TPrepDone --> Analyze["åˆ†æéšæ®µ<br/>markdown_report_generator.py"]
    PPrepDone --> Analyze
    WPrepDone --> Analyze

    Analyze --> APICall["Gemini API<br/>å¤š Key è¼ªæ›¿"]

    APICall --> Vision{"éœ€è¦åœ–ç‰‡<br/>åˆ†æ?"}

    Vision -->|å¦| Generate["ç”Ÿæˆ Markdown"]
    Vision -->|æ˜¯| VisionAPI["Vision API<br/>6 Key è¼ªæ›¿"]

    VisionAPI --> Generate

    Generate --> Report["å ±å‘Šå·²ç”Ÿæˆ<br/>report.md"]

    Report --> QA["QA é©—è­‰<br/>ä¸‰å±¤ç³»çµ±"]

    QA --> L1["Layer 1 é é˜²"]
    L1 --> L2["Layer 2 æª¢æ¸¬<br/>43 é …æ¸¬è©¦"]
    L2 --> L2Result{"é©—è­‰<br/>é€šé?"}

    L2Result -->|100%| L3None["ç„¡éœ€ä¿®å¾©"]
    L2Result -->|&lt;100%| L3["Layer 3 ä¿®å¾©<br/>310+ è¡Œé‚è¼¯"]

    L3 --> L3Result{"ä¿®å¾©<br/>æˆåŠŸ?"}
    L3Result -->|æ˜¯| L3Pass["ä¿®å¾©æˆåŠŸ"]
    L3Result -->|å¦| L3Warn["éƒ¨åˆ†æˆåŠŸ"]

    L3None --> Save["ä¿å­˜å ±å‘Š<br/>output/ ç›®éŒ„"]
    L3Pass --> Save
    L3Warn --> Save

    Save --> Final["âœ… å®Œæˆ<br/>Markdown å ±å‘Š"]

    Final --> Display{"è¼¸å‡ºæ–¹å¼"}
    Display -->|æ§åˆ¶å°| Console["é¡¯ç¤ºæ‘˜è¦"]
    Display -->|æª”æ¡ˆ| File["å„²å­˜æª”æ¡ˆ"]
    Display -->|HackMD| HM["HackMD ç›¸å®¹"]

    Console --> Success["âœ… æˆåŠŸ"]
    File --> Success
    HM --> Success

    Cleanup --> CleanMenu["Cleanup æµç¨‹<br/>clean.sh"]
    CleanMenu --> CleanEnd["æ¸…ç†å®Œæˆ"]

    Exit1 --> Exit2["çµæŸ"]
    CleanEnd --> Exit2
    Success --> Exit2

    style Start fill:#90EE90
    style Menu fill:#87CEEB
    style TPath fill:#FFB6C1
    style PPath fill:#FFB6C1
    style WPath fill:#FFB6C1
    style YPath fill:#FFB6C1
    style Analyze fill:#FFD700
    style APICall fill:#87CEEB
    style QA fill:#FFD700
    style L1 fill:#90EE90
    style L2 fill:#FFD700
    style L3 fill:#FFB6C1
    style Final fill:#00FF00
    style Success fill:#00FF00
    style Exit2 fill:#FFB6B6
            </div>

            <h3 class="diagram-title">ğŸ“‹ å®Œæ•´æµç¨‹æ­¥é©Ÿ</h3>
            <div class="flow-summary">1. ä½¿ç”¨è€…åŸ·è¡Œ run.sh
2. é¸æ“‡åŠŸèƒ½ (1-6)
3. è¼¸å…¥æ•¸æ“š (æª”æ¡ˆ/URL)
   â†“
[æ•¸æ“šä¾†æºåˆ¤æ–·]
â”œâ”€ é€å­—ç¨¿ â†’ transcript_cleaner
â”œâ”€ PDF â†’ pdf_preprocessor_docling
â”œâ”€ ç¶²é  â†’ web_preprocessor_hybrid
â””â”€ YouTube â†’ youtube_downloader
   â†“
[é è™•ç†å®Œæˆ]
   â†“
[åˆ†æèˆ‡ç”Ÿæˆ]
â”œâ”€ markdown_report_generator
â”œâ”€ Gemini API (å¤š Key è¼ªæ›¿)
â””â”€ Vision API (å¦‚éœ€åœ–ç‰‡)
   â†“
[ä¸‰å±¤ QA é©—è­‰]
â”œâ”€ Layer 1: é é˜²
â”œâ”€ Layer 2: æª¢æ¸¬ (43 é …)
â””â”€ Layer 3: ä¿®å¾© (310+ è¡Œ)
   â†“
[ä¿å­˜è¼¸å‡º]
â”œâ”€ HackMD ç›¸å®¹ Markdown
â”œâ”€ æ§åˆ¶å°æ‘˜è¦
â””â”€ output/ ç›®éŒ„
   â†“
âœ… å®Œæˆ</div>
        </div>

        <!-- Tab 7: æ±ºç­–è¡¨ -->
        <div class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">ğŸ“ˆ æ±ºç­–é‚è¼¯ç¸½çµè¡¨</h2>

            <div class="diagram-description">
                <strong>ğŸ“Œ èªªæ˜</strong>: æ‰€æœ‰ä¸»è¦æ±ºç­–é»ã€æ¢ä»¶èˆ‡å°æ‡‰åŸ·è¡Œæ¨¡çµ„çš„å®Œæ•´åƒè€ƒè¡¨
            </div>

            <h3 class="diagram-title">æ±ºç­–é» 1: æ•¸æ“šä¾†æº</h3>
            <table class="decision-table">
                <tr>
                    <th>è¼¸å…¥é¡å‹</th>
                    <th>æª¢æ¸¬æ¢ä»¶</th>
                    <th>å°æ‡‰è™•ç†</th>
                    <th>åŸ·è¡Œæ¨¡çµ„</th>
                    <th>å‚™è¨»</th>
                </tr>
                <tr>
                    <td>é€å­—ç¨¿æª”æ¡ˆ</td>
                    <td>å‰¯æª”å: .txt / .md / .srt</td>
                    <td>æ¸…ç†æ™‚é–“æˆ³ã€æ¨™è¨»ç™¼è¨€è€…</td>
                    <td>transcript_cleaner.py</td>
                    <td>æª¢æŸ¥å…§å®¹éç©º</td>
                </tr>
                <tr>
                    <td>PDF æª”æ¡ˆ</td>
                    <td>å‰¯æª”å: .pdf</td>
                    <td>Docling è§£æã€æå–åœ–ç‰‡</td>
                    <td>pdf_preprocessor_docling.py</td>
                    <td>æª¢æŸ¥ PDF å¯è®€</td>
                </tr>
                <tr>
                    <td>ç¶²é  URL</td>
                    <td>URL æ ¼å¼ã€é YouTube</td>
                    <td>æ··åˆé è™•ç† (BS4/PW æ±ºç­–)</td>
                    <td>web_preprocessor_hybrid.py</td>
                    <td>æª¢æŸ¥ç¶²é å¯è¨ªå•</td>
                </tr>
                <tr>
                    <td>YouTube URL</td>
                    <td>åŒ…å« youtube.com / youtu.be</td>
                    <td>ä¸‹è¼‰å­—å¹•ã€è½‰ç‚ºé€å­—ç¨¿</td>
                    <td>youtube_downloader.py</td>
                    <td>å„ªå…ˆä¸­æ–‡ (zh-TW)</td>
                </tr>
            </table>

            <h3 class="diagram-title">æ±ºç­–é» 2: ç¶²é é è™•ç†æ¨¡å¼</h3>
            <table class="decision-table">
                <tr>
                    <th>æª¢æ¸¬ä¿¡è™Ÿ</th>
                    <th>æ¡†æ¶åˆ¤æ–·</th>
                    <th>æ±ºç­–çµæœ</th>
                    <th>åŸ·è¡Œæ™‚é–“</th>
                    <th>å…§å®¹å®Œæ•´åº¦</th>
                </tr>
                <tr>
                    <td>éœæ…‹ HTML / CSS æ¡†æ¶</td>
                    <td>ç„¡ JS æ¡†æ¶</td>
                    <td>â†’ BeautifulSoup</td>
                    <td>&lt;50ms</td>
                    <td>100%</td>
                </tr>
                <tr>
                    <td>React / Vue / Next.js ä¿¡è™Ÿ</td>
                    <td>åµæ¸¬åˆ° JS æ¡†æ¶</td>
                    <td>â†’ Playwright</td>
                    <td>2-5 ç§’</td>
                    <td>100%</td>
                </tr>
                <tr>
                    <td>ç„¡æ³•åˆ¤å®š</td>
                    <td>æ¨¡æ£±å…©å¯</td>
                    <td>â†’ æŸ¥ config.py è¨­å®š</td>
                    <td>N/A</td>
                    <td>æŒ‰é…ç½®</td>
                </tr>
                <tr>
                    <td>è‡ªå‹•åˆ‡æ›æ¨¡å¼</td>
                    <td>N/A</td>
                    <td>å…ˆ BS4, å¤±æ•—åˆ‡æ› PW</td>
                    <td>è‡ªé©æ‡‰</td>
                    <td>è‡ªé©æ‡‰</td>
                </tr>
            </table>

            <h3 class="diagram-title">æ±ºç­–é» 3: åœ–ç‰‡åˆ†æéœ€æ±‚</h3>
            <table class="decision-table">
                <tr>
                    <th>åˆ¤æ–·æ¢ä»¶</th>
                    <th>æ˜¯å¦éœ€è¦ Vision</th>
                    <th>åŸ·è¡Œæµç¨‹</th>
                    <th>é…é¡ç­–ç•¥</th>
                    <th>æ€§èƒ½æŒ‡æ¨™</th>
                </tr>
                <tr>
                    <td>å…§å®¹åŒ…å«åœ–ç‰‡</td>
                    <td>âœ… æ˜¯</td>
                    <td>Gemini â†’ Vision API â†’ åµŒå…¥</td>
                    <td>6 å€‹ Key è¼ªæ›¿</td>
                    <td>0.8 ç§’/å¼µ</td>
                </tr>
                <tr>
                    <td>å…§å®¹ç„¡åœ–ç‰‡</td>
                    <td>âŒ å¦</td>
                    <td>Gemini â†’ ç›´æ¥è¼¸å‡º</td>
                    <td>1-3 å€‹ Key</td>
                    <td>å¿«é€Ÿ</td>
                </tr>
                <tr>
                    <td>åœ–ç‰‡è™•ç†å¤±æ•—</td>
                    <td>âš ï¸ é™ç´š</td>
                    <td>è‡ªå‹•é‡è©¦ 3 æ¬¡</td>
                    <td>Key åˆ‡æ›</td>
                    <td>å¤±æ•—å¾Œè·³é</td>
                </tr>
            </table>

            <h3 class="diagram-title">æ±ºç­–é» 4: PDF è™•ç†æ¨¡å¼</h3>
            <table class="decision-table">
                <tr>
                    <th>ä½¿ç”¨è€…é¸æ“‡</th>
                    <th>è™•ç†æµç¨‹</th>
                    <th>æ˜¯å¦ç¿»è­¯</th>
                    <th>æ˜¯å¦æå–åœ–ç‰‡</th>
                    <th>è¼¸å‡ºå…§å®¹</th>
                </tr>
                <tr>
                    <td>åŸæ–‡ç‰ˆ</td>
                    <td>Docling è§£æ</td>
                    <td>âŒ å¦</td>
                    <td>âŒ å¦</td>
                    <td>Markdown åŸæ–‡</td>
                </tr>
                <tr>
                    <td>ç¿»è­¯ç‰ˆ</td>
                    <td>Docling è§£æ + Google Translate</td>
                    <td>âœ… æ˜¯</td>
                    <td>âŒ å¦</td>
                    <td>Markdown ç¿»è­¯</td>
                </tr>
                <tr>
                    <td>æ·±åº¦åˆ†æ</td>
                    <td>å®Œæ•´è§£æ + Vision åˆ†æ</td>
                    <td>âœ… æ˜¯</td>
                    <td>âœ… æ˜¯</td>
                    <td>çµæ§‹åŒ–ç­†è¨˜ + åœ–ç‰‡</td>
                </tr>
            </table>

            <h3 class="diagram-title">æ±ºç­–é» 5: QA é©—è­‰æµç¨‹</h3>
            <table class="decision-table">
                <tr>
                    <th>é©—è­‰çµæœ</th>
                    <th>é€šéç‡</th>
                    <th>ä¸‹ä¸€æ­¥</th>
                    <th>ä¿®å¾©é‚è¼¯</th>
                    <th>æœ€çµ‚ç‹€æ…‹</th>
                </tr>
                <tr>
                    <td>Layer 1 å®Œæˆ</td>
                    <td>100%</td>
                    <td>â†’ Layer 2</td>
                    <td>ç„¡</td>
                    <td>é é˜²å®Œæˆ</td>
                </tr>
                <tr>
                    <td>Layer 2 é€šé</td>
                    <td>100%</td>
                    <td>â†’ ä¿å­˜è¼¸å‡º</td>
                    <td>ç„¡éœ€ä¿®å¾©</td>
                    <td>âœ… å ±å‘Šå®‰å…¨</td>
                </tr>
                <tr>
                    <td>Layer 2 éƒ¨åˆ†å¤±æ•—</td>
                    <td>75%-99%</td>
                    <td>â†’ Layer 3</td>
                    <td>310+ è¡Œè‡ªå‹•ä¿®å¾©</td>
                    <td>âœ… ä¿®å¾©æˆåŠŸ</td>
                </tr>
                <tr>
                    <td>Layer 2 å®Œå…¨å¤±æ•—</td>
                    <td>&lt;75%</td>
                    <td>â†’ Layer 3</td>
                    <td>310+ è¡Œè‡ªå‹•ä¿®å¾©</td>
                    <td>âš ï¸ äººå·¥å¯©æŸ¥</td>
                </tr>
            </table>

            <h3 class="diagram-title">æ±ºç­–é» 6: å…§å®¹å®Œæ•´åº¦åˆ¤æ–·</h3>
            <table class="decision-table">
                <tr>
                    <th>æå–å®Œæ•´åº¦</th>
                    <th>åˆ¤æ–·æ¢ä»¶</th>
                    <th>æ±ºç­–</th>
                    <th>åŸ·è¡Œæ™‚é–“</th>
                    <th>ä½¿ç”¨å·¥å…·</th>
                </tr>
                <tr>
                    <td>â‰¥80%</td>
                    <td>BS4 æå–æˆåŠŸ</td>
                    <td>ä¿æŒ BS4 å¿«é€Ÿè·¯å¾‘</td>
                    <td>&lt;50ms</td>
                    <td>BeautifulSoup</td>
                </tr>
                <tr>
                    <td>&lt;80%</td>
                    <td>BS4 æå–ä¸å®Œæ•´</td>
                    <td>åˆ‡æ›åˆ° Playwright</td>
                    <td>2-5 ç§’</td>
                    <td>Playwright</td>
                </tr>
                <tr>
                    <td>ç„¡æ³•åµæ¸¬</td>
                    <td>æ¨¡æ£±å…©å¯ä¿¡è™Ÿ</td>
                    <td>ä½¿ç”¨é»˜èªé…ç½®</td>
                    <td>è‡ªé©æ‡‰</td>
                    <td>config.py</td>
                </tr>
            </table>
        </div>

        <footer>
            <p>ğŸ“Š å°ˆæ¡ˆè³‡è¨Šæµç¨‹åœ– - exam21_notemaker | âœ… 6 å¤§æµç¨‹åœ– | åŒ…å« 20+ å€‹æ±ºç­–é» | æœ€å¾Œæ›´æ–°: 2025-11-26</p>
            <p style="margin-top: 10px; opacity: 0.7;">
                ç›¸é—œæ–‡æª”:
                <a href="ARCHITECTURE.md" style="color: #667eea; text-decoration: none;">ARCHITECTURE.md</a> |
                <a href="FLOWCHART_INTERACTIVE.html" style="color: #667eea; text-decoration: none;">FLOWCHART_INTERACTIVE.html</a> |
                <a href="../CRASH_LOG_QUICK_START.md" style="color: #667eea; text-decoration: none;">CRASH_LOG_QUICK_START.md</a>
            </p>
        </footer>
    </div>

    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">â†‘</button>

	    <script>
	        let currentTab = 0;
	        const tabs = document.querySelectorAll('.tab-content');
	        const buttons = document.querySelectorAll('.tab-button');
	        const renderedDiagrams = new Set();

	        function renderActiveTab() {
	            const active = document.querySelector('.tab-content.active');
	            if (!active) return;

	            const diagrams = active.querySelectorAll('.mermaid');
	            diagrams.forEach((diagram, idx) => {
	                const id = diagram.getAttribute('id') || `tab-${currentTab}-diagram-${idx}`;

	                if (renderedDiagrams.has(id)) {
	                    diagram.innerHTML = diagram.textContent;
	                    diagram.removeAttribute('data-processed');
	                }

	                renderedDiagrams.add(id);
	            });

	            mermaid.run({ querySelector: '.tab-content.active .mermaid' });
	        }

	        function switchTab(index) {
	            tabs.forEach(tab => tab.classList.remove('active'));
	            buttons.forEach(btn => btn.classList.remove('active'));

	            tabs[index].classList.add('active');
	            buttons[index].classList.add('active');
	            currentTab = index;

	            setTimeout(renderActiveTab, 100);
	        }

	        // Mermaid åˆå§‹åŒ–
	        mermaid.initialize({
	            startOnLoad: false,
	            theme: 'default',
	            securityLevel: 'loose',
	            flowchart: {
	                useMaxWidth: true
	            }
	        });

	        window.addEventListener('load', () => {
	            renderActiveTab();
	        });

	        // è¿”å›é ‚éƒ¨æŒ‰éˆ•
	        const backToTopBtn = document.getElementById('backToTop');
	        window.addEventListener('scroll', () => {
	            if (window.scrollY > 300) {
	                backToTopBtn.classList.add('show');
	            } else {
	                backToTopBtn.classList.remove('show');
	            }
	        });

	        function scrollToTop() {
	            window.scrollTo({ top: 0, behavior: 'smooth' });
	        }

	        // åˆå§‹åŒ–ç¬¬ä¸€å€‹æ¨™ç±¤
	        switchTab(0);
	    </script>
</body>
</html>
